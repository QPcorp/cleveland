/* angular-qpme 2017-03-21 */app.controller("activateController",function($scope,$location,$routeParams,$http,$rootScope,$cookieStore){var uid=$routeParams.uid;console.log(uid),$scope.activate={},$scope.activate.uid=uid,$scope.activate.password="",$scope.submit_disabled=!0,$scope.$watch("activate",function(){console.log("changed"),$scope.activate.password.length<7&&$scope.activate.password.length>0?($scope.login_error=!0,$scope.error_txt="Password is too short (Minimum 8).",$scope.submit_disabled=!0):$scope.activate.password!=$scope.activate.new_password&&$scope.activate.password.length>7?($scope.login_error=!0,$scope.error_txt="Passwords do not match.",$scope.submit_disabled=!0):($scope.login_error=!1,$scope.submit_disabled=!1)},!0),$scope.passwordSet=function(){if($scope.submit_disabled!==!1)$scope.activate.login_error=!0;else{var url="https://dev-csr-clevelandclinic.locomobi.com/user/password";$http.put(url,$scope.activate,config).success(function(data,status,headers,config){console.log(data)}).error(function(data,status,header,config){console.log(data)});var url2="https://"+appConfig.domain+"/user/activate";$http.put(url2,$scope.activate,config).success(function(data,status,headers,config){console.log(data)}).error(function(data,status,header,config){console.log(data)})["finally"](function(){$cookieStore.remove("user"),$location.path("/")})}}}),app.controller("addEmployeeController",function($scope,$location,$http,appConfig,$rootScope,$cookieStore,locationService){$scope.employee={},$scope.add_employee=function(){({badge_encode_number:$scope.employee.badge_encode_number,email:$scope.employee.email,job_title:$scope.employee.job_title,name_suffix:$scope.employee.name_suffix,first_name:$scope.employee.first_name,middle_name:$scope.employee.middle_name,last_name:$scope.employee.last_name,location_code:$scope.employee.location_code,location_description:$scope.employee.location_description,ccf_mail_code:$scope.employee.ccf_mail_code,division:$scope.employee.division,department_name:$scope.employee.department_name,supervisor_firt_name:$scope.employee.supervisor_firt_name,supervisor_last_name:$scope.employee.supervisor_last_name,hire_date:$scope.employee.hire_date,termination_date:$scope.employee.termination_date,create_time:$scope.employee.create_time,tag_number:$scope.employee.tag_number});$http({method:"POST",url:"https://dev-csr-clevelandclinic.locomobi.com/employees",data:$scope.employee,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status){console.log(data),data.error?$scope.error_text=data.msg:$location.path("/employees")}).error(function(data,status,headers,config){console.log(data)})}}),app.controller("basicController",function($scope,$log){this.product=gem,this.items=item,$scope.$log=$log,$scope.log_message="This is a logged message",$scope.info_message="This is an info message",$scope.warn_message="This is a warning message",$scope.error_message="This is an error form message",$log.log($scope.log_message),$log.info($scope.info_message),$log.warn($scope.warn_message),$log.error($scope.error_message)}),app.controller("employeeController",function($scope,$location,$routeParams,$http,$rootScope,$cookieStore,locationService){console.log($rootScope.user);var employee_id=$routeParams.id;$scope.user=$rootScope.user.info,$scope.employee={},$scope.vehicle={},$scope.vehicle.state="0",$scope.vehicle.vehicle_make_id="0",$scope.vehicle.vehicle_type_id="0",$scope.violation={},$scope.violation.employee_id=employee_id,$scope.violation.type="0",$scope.violation.action="0",$scope.violation.amount="0",$scope.employee.job_type="0",$scope.vehicleSelected=!1,$scope.violationSelected=!1,$scope.tab=1,$scope.getEmployeeData=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.employee=data,$scope.employee.primary_assignment_id=data.primary_assignment_id.toString(),data.secondary_assignment_id&&($scope.employee.secondary_assignment_id=data.secondary_assignment_id.toString()),data.job_type_id&&($scope.employee.job_type_id=data.job_type_id.toString(),console.log($scope.employee.job_type_id)),data.primary_shift_id?$scope.employee.primary_shift_id=data.primary_shift_id.toString():$scope.employee.primary_shift_id="0",data.form_of_payment_id?$scope.employee.form_of_payment_id=data.form_of_payment_id:$scope.employee.form_of_payment_id="0",console.log("EMPLOYEE",$scope.employee)}).error(function(data,status,headers,config){console.log(data)})},$scope.getEmployeeNotes=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id+"/notes",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.notes=data,console.log("NOTES",data)}).error(function(data,status,headers,config){console.log(data)})},$scope.addEmployeeNote=function(){$http({method:"POST",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id+"/notes",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.notes=data,console.log("NOTES",data)}).error(function(data,status,headers,config){console.log(data)})},$scope.addEmployeeVehicle=function(){var vehicle_data={vehicle:{license_plate_number:$scope.vehicle.license_plate_number,state_id:$scope.vehicle.state_id,temporary_plate:"0",year:$scope.vehicle.year,model:$scope.vehicle.vehicle_model_id,color:$scope.vehicle.color,avi_sticker_number:$scope.vehicle.avi_sticker_number,leed_qualified:"0",parking_lot_sticker_number:$scope.vehicle.parking_lot_sticker_number,vehicle_type_id:$scope.vehicle.vehicle_type_id,vehicle_make_id:$scope.vehicle.vehicle_make_id}};console.log(vehicle_data),$http({method:"POST",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id+"/vehicles",data:vehicle_data,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log("ADD VEHICLE RESPONSE",data),$("#employee-vehicles").dataTable().fnDestroy(),$scope.buildVehicleTable()}).error(function(data,status,headers,config){console.log(data)})},$scope.updateEmployee=function(){var vehicle_data={license_plate_number:$scope.vehicle.license_plate_number,state_id:$scope.vehicle.state,temporary_plate:"0",year:$scope.vehicle.year,vehicle_model_id:$scope.vehicle.vehicle_model_id,color:$scope.vehicle.color,avi_sticker_number:$scope.vehicle.avi_sticker_number,parking_lot_sticker_number:$scope.vehicle.parking_lot_sticker_number,vehicle_type_id:$scope.vehicle.type};console.log(vehicle_data),$http({method:"PUT",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id,data:$scope.employee,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log("update employee",data)}).error(function(data,status,headers,config){console.log(data)})},$scope.getPrimaryAssignments=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/assignments",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.primary_assignments=data,console.log($scope.employee.primary_assignment)}).error(function(data,status,headers,config){console.log(data)})},$scope.getJobTypes=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/job_types",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.job_types=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getVehicleStates=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/states",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.states=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getVehicleTypes=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/vehicles/types",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.vehicle_types=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getVehicleMakes=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/vehicles/makes",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.vehicle_makes=data,console.log("Vehcile makes: ",data)}).error(function(data,status,headers,config){console.log(data)})},$scope.getViolationTypes=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/violations/types",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.violation_types=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getViolationActions=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/violations/actions",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.violation_actions=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getViolationAmounts=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/violations/amounts",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){$scope.violation_amounts=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getShifts=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/shifts",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log("shifts",data),$scope.shifts=data}).error(function(data,status,headers,config){console.log(data)})},$scope.formOfPayments=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/forms_of_payment",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log("forms of payments",data),$scope.form_of_payments=data}).error(function(data,status,headers,config){console.log(data)})},$scope.getEmployeeVehicles=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id+"/vehicles",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(vehicles,status,headers,config){console.log("VEHICLES",vehicles),$scope.vehicles=vehicles,vehicles.length<1?console.log("No Vehicles"):$scope.buildVehicleTable()}).error(function(data,status,headers,config){console.log(data)})},$scope.buildVehicleTable=function(){$("#employee-vehicles").empty();var columns=[{sTitle:"License Plate",mData:"license_plate_number"},{sTitle:"Type",sClass:"type"},{sTitle:"Model",mData:"model"},{sTitle:"Color",mData:"color"},{sTitle:"Year",mData:"year"},{sTitle:"AVI Number",mData:"avi_sticker_number"},{sTitle:"Parking Lot Sticker",mData:"parking_lot_sticker_number"},{sTitle:"Edit",sClass:"vehicle-edit"},{sTitle:"Delete",sClass:"vehicle-delete"}];$("#employee-vehicles").dataTable({data:$scope.vehicles,columns:columns,columnDefs:[{targets:1,data:function(row,type,val,meta){for(var i=0;i<$scope.vehicle_types.length;i++)if(row.vehicle_type_id==$scope.vehicle_types[i].id){var x=$scope.vehicle_types[i].name;return x}}},{targets:7,data:function(row,type,val,meta){return'<button class="btn btn-sm btn-default edit-vehicle" data-vehicle="'+row.id+'">Edit Vehicle</button></a>'}},{targets:8,data:function(row,type,val,meta){return'<button class="btn btn-sm btn-danger delete-vehicle" data-vehicle="'+row.id+'">Delete Vehicle</button></a>'}}]}),$(".edit-vehicle").click(function(){$(this).data("vehicle");$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log(data),$scope.vehicle.lpn=data[0].lpn,$scope.vehicle.state=data[0].state,$scope.vehicle.make=data[0].make,$scope.vehicle.model=data[0].model,$scope.vehicle.type=data[0].type,$scope.vehicle.year=data[0].year,$scope.vehicle.avi_number=data[0].avi_number,$scope.vehicle.color=data[0].color,$(".vehicle-btn").text("Update Vehicle")}).error(function(data,status,headers,config){console.log(data)})})},$scope.vehicle_update=function(){$scope.vehicle={},$(".vehicle-btn").text("Add Vehicle")},$scope.getEmployeeViolations=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/"+employee_id+"/violations",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(violations,status,headers,config){console.log("VIOLATIONS",violations);var columns=[{sTitle:"Violation Date",mData:"violation_date"},{sTitle:"Violation Number",mData:"violation_number"},{sTitle:"Violation Type",mData:"violation_type_id"},{sTitle:"Payment Status",mData:"payment_status"},{sTitle:"Amount",mData:"violation_amount"},{sTitle:"Actions",sClass:"violation-details"}];$("#violations").dataTable({data:violations,columns:columns,columnDefs:[{targets:5,data:function(row,type,val,meta){return'<button class="btn btn-sm btn-default violation-details" data-violation="'+row.id+'">View Details</button></a>'}}]}),$("#violations").on("click",".violation-details",function(){var violation_id=$(this).data("violation");console.log(violation_id),$http({method:"GET",url:appConfig.proxy+"://"+appConfig.domain+"/violations/"+violation_id,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log(data),$scope.violation.lpn=data[0].lpn,$scope.violation.date=data[0].date,$scope.violation.time=data[0].time,$scope.violation.employee_id=data[0].employee_id,$scope.violation.type=data[0].type,$scope.violation.description=data[0].description,$(".add-violation").text("Update Violation")}).error(function(data,status,headers,config){console.log(data)})})}).error(function(data,status,headers,config){console.log(data)})},$scope.violation_update=function(){$scope.violation={},$(".add-violation").text("Add Violation")},$scope.getVehicleStates(),$scope.getPrimaryAssignments(),$scope.getVehicleTypes(),$scope.getVehicleMakes(),$scope.getViolationTypes(),$scope.getViolationActions(),$scope.getViolationAmounts(),$scope.getEmployeeVehicles(),$scope.getJobTypes(),$scope.getShifts(),$scope.formOfPayments(),$scope.getEmployeeData(),$scope.getEmployeeNotes(),$scope.getEmployeeViolations()}),app.controller("employeesController",function($scope,$location,$http,appConfig,$rootScope,$cookieStore,locationService){console.log($rootScope.user),$scope.user=$rootScope.user.info,$scope.employees=function(){$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(employees,status,headers,config){console.log(employees),employees.length<1&&($scope.no_employees=!0);var columns=[{sTitle:"Employee Number",mData:"employee_number"},{sTitle:"Badge Number",mData:"badge_encode_number"},{sTitle:"Employment Status",mData:"employment_status"},{sTitle:"Email",mData:"email_address"},{sTitle:"Job Title",mData:"job_title"},{sTitle:"First Name",mData:"first_name"},{sTitle:"Last Name",mData:"last_name"},{sTitle:"Hire Date",mData:"adjust_hire_date"},{sTitle:"CCF Mail Code",mData:"ccf_mail_code"},{sTitle:"Department Name",mData:"department_name"},{sTitle:"Supervisor Fn",mData:"supervisor_first_name"},{sTitle:"Supervisor Ln",mData:"supervisor_last_name"},{sTitle:"Actions",sClass:"employee-actions"}];$("#employees-table").dataTable({data:employees,columns:columns,columnDefs:[{targets:12,data:function(row,type,val,meta){return'<a href="/#/employee/'+row.id+'"><button class="btn btn-sm btn-default" data-employee="'+row.id+'">View Details</button></a>'}}]})}).error(function(data,status,headers,config){console.log(data)})},$scope.employees()}),app.controller("findEmployeeController",function($scope,$location,$http,appConfig,$rootScope,$cookieStore,locationService){console.log($rootScope.user),$scope.user=$rootScope.user.info;var auth=Base64.encode("gandalf@rivendell.com:5jf99enfvjr"),count=0;$scope.search=function(query){count>0&&$("#employees-table").dataTable().fnDestroy(),count++;var search_string="";for(var key in $scope.employee.data)console.log(key),""===$scope.employee.data[key]?console.log("empty value"):search_string+="employee["+key+"]="+$scope.employee.data[key]+"&",console.log("SEARCH STRING",search_string);$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/employees/find/by?"+search_string,headers:{"Content-Type":"application/json",Authorization:"Basic "+auth}}).success(function(data,status,headers,config){console.log(data);var columns=[{sTitle:"Badge Number",mData:"badge_encode_number"},{sTitle:"Employee Number",mData:"employee_number"},{sTitle:"Email",mData:"email_address"},{sTitle:"Job Title",mData:"job_title"},{sTitle:"First Name",mData:"first_name"},{sTitle:"Last Name",mData:"last_name"},{sTitle:"Location",mData:"location"},{sTitle:"Department Name",mData:"department_name"},{sTitle:"Actions",sClass:"employee-actions"}];$("#employees-table").dataTable({data:data.employees,columns:columns,columnDefs:[{targets:8,data:function(row,type,val,meta){return'<a href="/#/employee/'+row.id+'"><button class="btn btn-sm btn-default" data-employee="'+row.id+'">View Details</button></a>'}}]})}).error(function(data,status,headers,config){$scope.login_error=!0})},$scope.employees=function(){var unix_time=Math.round((new Date).getTime()/1e3);console.log(unix_time),console.log(unix_time-14400),unix_time-=14400;var t=new Date(1e3*unix_time);$scope.current_unit_time=t},$scope.employees()}),app.controller("loginController",function($scope,$location,$http,$rootScope,appConfig,$cookieStore){$scope.login={},$rootScope.user={},$scope.password_email=!1,$scope.auth=function(login){console.log(login);var auth=Base64.encode(login.username+":"+login.password);$http({method:"GET",url:"https://dev-csr-clevelandclinic.locomobi.com/login",headers:{"Content-Type":"application/json",Authorization:"Basic "+auth}}).success(function(data,status,headers,config){console.log(data),$scope.login_error=!1;var username=login.username;$rootScope.user.basicAuth=auth,$rootScope.user.info=data[0],$rootScope.user.login=username,$cookieStore.put("user",$rootScope.user),console.log($rootScope.user),$location.path("/find-employee"),$("#top-nav").show()}).error(function(data,status,headers,config){$scope.login_error=!0,$location.path("/find-employee")})},$scope.forgot_password=function(){var url="https://"+appConfig.domain+"/user/password_reset";$http.post(url,$scope.login_forgot,config).success(function(data,status,headers,config){console.log(data),data.user===!1?$scope.user_error=!0:($scope.user_error=!1,$scope.password_email=!0)}).error(function(data,status,header,config){console.log(data)})},$scope.reload=function(){location.reload()}}),app.controller("mainController",function($scope,$rootScope,$location){$scope.message="This is a homepage message",this.booger=function(){alert('Uses the "this"')},$scope.booger=function(){alert('Uses the "$scope"'),$(".boogerTitle").html("Changed by Jquery")}}),app.controller("navController",function($scope,$location,$rootScope,$cookieStore){$scope.user=$rootScope.user.info,$scope.user={},"master"!=$scope.user.user_type&&"admin"!=$scope.user.user_type||($scope.admin_show=!0),$scope.logout=function(){$cookieStore.remove("user"),$location.path("/"),window.location.reload(!0)},$scope.reports=function(){$(".sub-reports").toggleClass("active-list"),$(".nav-expand").toggleClass("chevron-down"),$(".reports-link").toggleClass("down")}}),app.controller("tabController",function(){this.tab=1,this.selectTab=function(setTab){this.tab=setTab},this.isSelected=function(checkTab){return this.tab===checkTab}}),app.controller("topNavController",function($scope,$location,$rootScope,$cookieStore){$scope.logout=function(){$cookieStore.remove("user"),$location.path("/"),window.location.reload(!0)},$scope.menu=function(){$("#wrapper").toggleClass("toggled"),$(".menu-open").toggleClass("closed")},"/"!==$location.path()&&"/activate"!==$location.path()||$("#top-nav").hide()}),app.controller("userProfileController",function($scope,$location,$http,appConfig,$rootScope,$cookieStore,locationService){console.log($rootScope.user),$scope.user=$rootScope.user.info,$scope.reset={},$scope.reset.uid=$scope.user.uid,$scope.save_profile=function(){$http({method:"PUT",url:"https://"+appConfig.domain+"/user",data:$scope.user,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log(data),$scope.user=data.data,$rootScope.user.info=data.data,$cookieStore.put("user",$rootScope.user),console.log($rootScope.user.info)}).error(function(data,status,header,config){console.log(data)})["finally"](function(){location.reload()})},$scope.passwordSet=function(){console.log($scope.activate);var url="https://"+appConfig.domain+"/user/password";$http.put(url,$scope.reset,config).success(function(data,status,headers,config){console.log(data)}).error(function(data,status,header,config){console.log(data)})["finally"](function(){$scope.password_input=!1;var auth=Base64.encode($scope.user.user+":"+$scope.reset.password);$http({method:"GET",url:"https://"+appConfig.domain+"/login",headers:{"Content-Type":"application/json",Authorization:"Basic "+auth}}).success(function(data,status,headers,config){console.log(data),$rootScope.user.basicAuth=auth,$cookieStore.put("user",$rootScope.user)}).error(function(data,status,headers,config){console.log(data)})})}}),app.controller("violationController",function($scope,$location,$routeParams,$http,appConfig,$rootScope,$cookieStore,locationService){$scope.user=$rootScope.user.info,$scope.violation={},$http({method:"GET",url:appConfig.proxy+"://"+appConfig.domain+"/violations",headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(vehicles,status,headers,config){console.log(vehicles);var columns=[{sTitle:"License Plate",mData:"lpn"},{sTitle:"Type",mData:"type"},{sTitle:"Employee Id",mData:"employee_id"},{sTitle:"Date",mData:"date"},{sTitle:"Time",mData:"time"},{sTitle:"Description",mData:"description"},{sTitle:"Actions",sClass:"violation-details"}];$("#violations").dataTable({data:vehicles,columns:columns,columnDefs:[{targets:6,data:function(row,type,val,meta){return'<button class="btn btn-sm btn-default violation-details" data-violation="'+row.id+'">View Details</button></a>'}}]}),$("#violations").on("click",".violation-details",function(){var violation_id=$(this).data("violation");console.log(violation_id),$http({method:"GET",url:appConfig.proxy+"://"+appConfig.domain+"/violations/"+violation_id,headers:{"Content-Type":"application/json",Authorization:"Basic "+$rootScope.user.basicAuth}}).success(function(data,status,headers,config){console.log(data),$scope.violation.lpn=data[0].lpn,$scope.violation.date=data[0].date,$scope.violation.time=data[0].time,$scope.violation.employee_id=data[0].employee_id,$scope.violation.type=data[0].type,$scope.violation.description=data[0].description,$(".add-violation").text("Update Violation")}).error(function(data,status,headers,config){console.log(data)})})}).error(function(data,status,headers,config){console.log(data)}),$scope.violation_update=function(){$scope.violation={},$(".add-violation").text("Add Violation")}});